<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Amor Conect</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="globals.css">
    <link rel="stylesheet" href="components.css">
    
    <!-- CSS ESPEC√çFICO DO CADASTRO -->
    <style>
        /* ==================== CADASTRO CSS ==================== */
        
        .auth-container {
            width: 90%;
            max-width: 500px;
            background: var(--branco);
            border-radius: 20px;
            box-shadow: var(--shadow-xl);
            padding: 3rem;
            border: 1px solid var(--lilas);
            margin: 2rem auto;
            position: relative;
            overflow: hidden;
        }

        .auth-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, var(--vermelho-rosado), var(--lilas));
        }

        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 1rem auto;
            object-fit: contain;
            display: block;
            border-radius: 50%;
            padding: 10px;
            background: var(--bege);
        }

        .auth-header h1 {
            font-size: 2.2rem;
            color: var(--vermelho-rosado);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .auth-header p {
            color: var(--text-light);
            font-size: 1rem;
            line-height: 1.5;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .btn-block {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            margin-top: 1rem;
            position: relative;
        }

        .auth-footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--lilas);
        }

        /* Password Requirements */
        .password-requirements {
            background: var(--bege);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 0.5rem;
            border: 1px solid var(--lilas);
        }

        .password-requirements h4 {
            color: var(--vermelho-rosado);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .requirements-list {
            list-style: none;
            font-size: 0.8rem;
            margin: 0;
            padding: 0;
        }

        .requirements-list li {
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .requirement-met {
            color: var(--success);
            font-weight: 600;
        }

        .requirement-met::before {
            content: "‚úÖ ";
        }

        .requirement-unmet {
            color: var(--text-light);
        }

        .requirement-unmet::before {
            content: "‚ùå ";
        }

        /* Password Strength Meter */
        .password-strength {
            margin-top: 0.5rem;
            height: 6px;
            border-radius: 3px;
            background: #e5e7eb;
            overflow: hidden;
            position: relative;
        }

        .strength-bar {
            height: 100%;
            width: 0%;
            transition: var(--transition);
            border-radius: 3px;
            position: absolute;
            left: 0;
            top: 0;
        }

        .strength-weak { 
            background: linear-gradient(90deg, #ef4444, #f97316);
            width: 25%; 
        }
        .strength-fair { 
            background: linear-gradient(90deg, #f97316, #eab308);
            width: 50%; 
        }
        .strength-good { 
            background: linear-gradient(90deg, #eab308, #84cc16);
            width: 75%; 
        }
        .strength-strong { 
            background: linear-gradient(90deg, #84cc16, #22c55e);
            width: 100%; 
        }

        .strength-text {
            font-size: 0.75rem;
            margin-top: 0.25rem;
            text-align: right;
            font-weight: 600;
        }

        /* Terms Checkbox */
        .terms-group {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--cinza-claro);
            border-radius: 10px;
            border: 1px solid var(--cinza-medio);
        }

        .terms-group input[type="checkbox"] {
            margin-top: 0.25rem;
            accent-color: var(--vermelho-rosado);
            transform: scale(1.2);
        }

        .terms-group label {
            font-size: 0.9rem;
            line-height: 1.4;
            color: var(--preto);
        }

        .terms-group a {
            color: var(--vermelho-rosado);
            text-decoration: none;
            font-weight: 600;
        }

        .terms-group a:hover {
            text-decoration: underline;
        }

        /* Alertas */
        .alert {
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: none;
            position: relative;
            padding-right: 2.5rem;
        }

        .alert-error {
            background: #fed7d7;
            border: 1px solid #feb2b2;
            color: #c53030;
        }

        .alert-success {
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            color: #276749;
        }

        .alert .close-alert {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0.7;
            transition: var(--transition);
        }

        .alert .close-alert:hover {
            opacity: 1;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 1rem;
            color: var(--vermelho-rosado);
        }

        /* Toggle Password */
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 4px;
            border-radius: 4px;
            transition: var(--transition);
        }

        .password-toggle:hover {
            background: var(--cinza-claro);
        }

        .form-group {
            position: relative;
        }

        /* Loading States */
        .spinner-small {
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }

        /* Bot√µes com estados de loading */
        .btn:disabled {
            position: relative;
            color: transparent;
        }

        .btn:disabled::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        /* Anima√ß√µes */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .auth-container {
            animation: slideInUp 0.5s ease;
        }

        /* Estados de foco melhorados */
        .form-control:focus {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(233, 30, 99, 0.15);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .auth-container {
                padding: 2rem;
                margin: 1rem auto;
            }

            .auth-logo {
                width: 120px;
                height: 120px;
            }

            .auth-header h1 {
                font-size: 2rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .auth-container {
                padding: 1.5rem;
            }

            .auth-logo {
                width: 100px;
                height: 100px;
            }

            .auth-header h1 {
                font-size: 1.8rem;
            }
            
            .terms-group {
                padding: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="logoamorconect.png" alt="Amor Conect">
                    <h1>Amor Conect</h1>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="btn btn-outline">Entrar</a>
                    <a href="cadastro.html" class="btn btn-primary">Cadastre-se</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="auth-container">
                <div class="auth-header">
                    <img src="logoamorconect.png" alt="Amor Conect" class="auth-logo">
                    <h1>Criar Conta</h1>
                    <p>Junte-se ao Amor Conect e encontre sua conex√£o perfeita</p>
                </div>

                <!-- Alert Messages -->
                <div id="errorAlert" class="alert alert-error">
                    <button class="close-alert" onclick="this.parentElement.style.display='none'">√ó</button>
                    <span class="alert-message"></span>
                </div>
                <div id="successAlert" class="alert alert-success">
                    <button class="close-alert" onclick="this.parentElement.style.display='none'">√ó</button>
                    <span class="alert-message"></span>
                </div>
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>Processando cadastro...</p>
                </div>

                <form id="registerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName" class="form-label">Nome *</label>
                            <input type="text" id="firstName" class="form-control" required placeholder="Seu nome">
                            <div id="firstNameError" class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="lastName" class="form-label">Sobrenome *</label>
                            <input type="text" id="lastName" class="form-control" required placeholder="Seu sobrenome">
                            <div id="lastNameError" class="error-message"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="nickname" class="form-label">Apelido/Nickname *</label>
                        <input type="text" id="nickname" class="form-control" required placeholder="Como quer ser chamado(a)">
                        <div id="nicknameError" class="error-message"></div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="form-label">E-mail *</label>
                        <input type="email" id="email" class="form-control" required placeholder="seu@email.com">
                        <div id="emailError" class="error-message"></div>
                    </div>

                    <div class="form-group">
                        <label for="birthDate" class="form-label">Data de Nascimento *</label>
                        <input type="date" id="birthDate" class="form-control" required>
                        <div id="birthDateError" class="error-message"></div>
                    </div>

                    <div class="form-group">
                        <label for="password" class="form-label">Senha *</label>
                        <input type="password" id="password" class="form-control" required placeholder="Crie uma senha segura">
                        <button type="button" class="password-toggle" id="togglePassword" aria-label="Mostrar senha">üëÅÔ∏è</button>
                        <div id="passwordError" class="error-message"></div>
                        
                        <!-- REQUISITOS DA SENHA -->
                        <div class="password-requirements">
                            <h4>Requisitos da senha:</h4>
                            <ul class="requirements-list">
                                <li id="reqLength" class="requirement-unmet">M√≠nimo 8 caracteres</li>
                                <li id="reqUppercase" class="requirement-unmet">Pelo menos 1 letra mai√∫scula</li>
                                <li id="reqLowercase" class="requirement-unmet">Pelo menos 1 letra min√∫scula</li>
                                <li id="reqNumber" class="requirement-unmet">Pelo menos 1 n√∫mero</li>
                                <li id="reqSpecial" class="requirement-unmet">Pelo menos 1 s√≠mbolo</li>
                            </ul>
                            <div class="password-strength">
                                <div id="strengthBar" class="strength-bar"></div>
                            </div>
                            <div id="strengthText" class="strength-text"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword" class="form-label">Confirmar Senha *</label>
                        <input type="password" id="confirmPassword" class="form-control" required placeholder="Digite a senha novamente">
                        <div id="confirmPasswordError" class="error-message"></div>
                    </div>

                    <div class="terms-group">
                        <input type="checkbox" id="terms" required>
                        <label for="terms">
                            Concordo com os <a href="#" target="_blank">Termos de Servi√ßo</a> e 
                            <a href="#" target="_blank">Pol√≠tica de Privacidade</a> *
                        </label>
                    </div>
                    <div id="termsError" class="error-message"></div>

                    <button type="submit" class="btn btn-primary btn-block" id="submitBtn">
                        Criar Conta
                    </button>

                    <div class="auth-footer">
                        <p>J√° tem uma conta? <a href="login.html">Fa√ßa login aqui</a></p>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Amor Conect</h3>
                    <p>Uma plataforma segura e discreta para conectar cora√ß√µes.</p>
                </div>
                <div class="footer-column">
                    <h3>Links R√°pidos</h3>
                    <ul>
                        <li><a href="index.html">P√°gina Inicial</a></li>
                        <li><a href="#como-funciona">Como Funciona</a></li>
                        <li><a href="#sobre">Sobre N√≥s</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Suporte</h3>
                    <ul>
                        <li><a href="#">Central de Ajuda</a></li>
                        <li><a href="#">Pol√≠tica de Privacidade</a></li>
                        <li><a href="#">Termos de Uso</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Amor Conect. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- SCRIPTS -->
    <script src="globals.js"></script>
    <script src="auth.js"></script>
    
    <!-- INICIALIZA√á√ÉO DO CADASTRO -->
    <script>
        // ==================== INICIALIZA√á√ÉO DO CADASTRO ====================

        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìù Cadastro.html - Inicializando...');
            
            // Configurar data m√°xima (18 anos atr√°s)
            const today = new Date();
            const maxDate = new Date(today.getFullYear() - 18, today.getMonth(), today.getDate());
            document.getElementById('birthDate').max = maxDate.toISOString().split('T')[0];
            
            // Configurar data m√≠nima (100 anos atr√°s)
            const minDate = new Date(today.getFullYear() - 100, today.getMonth(), today.getDate());
            document.getElementById('birthDate').min = minDate.toISOString().split('T')[0];

            // Salvar texto original do bot√£o
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.setAttribute('data-original-text', submitBtn.innerHTML);
            }

            // Configurar toggle de senha
            setupPasswordToggle();

            // Configurar valida√ß√µes em tempo real
            setupRealTimeValidation();

            console.log('‚úÖ Cadastro.html inicializado!');
        });

        function setupPasswordToggle() {
            const toggleBtn = document.getElementById('togglePassword');
            const passwordInput = document.getElementById('password');
            
            if (toggleBtn && passwordInput) {
                toggleBtn.addEventListener('click', function() {
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                    toggleBtn.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üîí';
                    toggleBtn.setAttribute('aria-label', type === 'password' ? 'Mostrar senha' : 'Ocultar senha');
                });
            }
        }

        function setupRealTimeValidation() {
            // Limpar erros ao digitar
            const inputs = ['firstName', 'lastName', 'nickname', 'email', 'password', 'confirmPassword', 'birthDate'];
            
            inputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', function() {
                        clearFieldError(inputId);
                        // Validar em tempo real para alguns campos
                        if (inputId === 'password') {
                            validatePasswordRealTime();
                        } else if (inputId === 'confirmPassword') {
                            validateConfirmPasswordRealTime();
                        } else if (inputId === 'email') {
                            validateEmailRealTime();
                        }
                    });
                    
                    // Validar ao sair do campo
                    input.addEventListener('blur', function() {
                        if (inputId === 'firstName' || inputId === 'lastName') {
                            validateNameRealTime(inputId);
                        } else if (inputId === 'nickname') {
                            validateNicknameRealTime();
                        } else if (inputId === 'email') {
                            validateEmailRealTime();
                        } else if (inputId === 'birthDate') {
                            validateBirthDateRealTime();
                        } else if (inputId === 'confirmPassword') {
                            validateConfirmPasswordRealTime();
                        }
                    });
                }
            });

            // Valida√ß√£o espec√≠fica para termos
            const termsInput = document.getElementById('terms');
            if (termsInput) {
                termsInput.addEventListener('change', function() {
                    clearFieldError('terms');
                });
            }
        }

        // ==================== VALIDA√á√ïES EM TEMPO REAL ====================

        function validateNameRealTime(fieldId) {
            const field = document.getElementById(fieldId);
            const value = field.value.trim();
            
            if (value === '') {
                hideFieldError(fieldId);
                field.classList.remove('error');
                return;
            }
            
            if (value.length < 2) {
                showFieldError(fieldId, fieldId === 'firstName' ? 
                    'Nome deve ter pelo menos 2 caracteres' : 
                    'Sobrenome deve ter pelo menos 2 caracteres');
                field.classList.add('error');
            } else {
                hideFieldError(fieldId);
                field.classList.remove('error');
            }
        }

        function validateNicknameRealTime() {
            const field = document.getElementById('nickname');
            const value = field.value.trim();
            
            if (value === '') {
                hideFieldError('nickname');
                field.classList.remove('error');
                return;
            }
            
            if (value.length < 3) {
                showFieldError('nickname', 'Nickname deve ter pelo menos 3 caracteres');
                field.classList.add('error');
            } else {
                hideFieldError('nickname');
                field.classList.remove('error');
            }
        }

        function validateEmailRealTime() {
            const field = document.getElementById('email');
            const value = field.value.trim();
            
            if (value === '') {
                hideFieldError('email');
                field.classList.remove('error');
                return;
            }
            
            const isValid = validateEmail(value);
            
            if (!isValid) {
                showFieldError('email', 'Por favor, insira um e-mail v√°lido');
                field.classList.add('error');
            } else {
                hideFieldError('email');
                field.classList.remove('error');
            }
        }

        function validateBirthDateRealTime() {
            const field = document.getElementById('birthDate');
            const value = field.value;
            
            if (!value) {
                hideFieldError('birthDate');
                field.classList.remove('error');
                return;
            }
            
            const age = calculateAge(value);
            
            if (age < 18) {
                showFieldError('birthDate', 'Voc√™ deve ter pelo menos 18 anos');
                field.classList.add('error');
            } else if (age > 100) {
                showFieldError('birthDate', 'Data de nascimento inv√°lida');
                field.classList.add('error');
            } else {
                hideFieldError('birthDate');
                field.classList.remove('error');
            }
        }

        function validatePasswordRealTime() {
            const field = document.getElementById('password');
            const value = field.value;
            
            if (value === '') {
                hideFieldError('password');
                field.classList.remove('error');
                return;
            }
            
            const passwordValidation = validatePassword(value);
            
            if (!passwordValidation.isValid) {
                showFieldError('password', 'A senha n√£o atende aos requisitos de seguran√ßa');
                field.classList.add('error');
            } else {
                hideFieldError('password');
                field.classList.remove('error');
            }
        }

        function validateConfirmPasswordRealTime() {
            const field = document.getElementById('confirmPassword');
            const password = document.getElementById('password').value;
            const value = field.value;
            
            if (value === '') {
                hideFieldError('confirmPassword');
                field.classList.remove('error');
                return;
            }
            
            if (value !== password) {
                showFieldError('confirmPassword', 'As senhas n√£o coincidem');
                field.classList.add('error');
            } else {
                hideFieldError('confirmPassword');
                field.classList.remove('error');
            }
        }

        // ==================== FUN√á√ïES AUXILIARES ====================

        function showFieldError(fieldId, message) {
            const errorElement = document.getElementById(fieldId + 'Error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
                errorElement.classList.add('show');
            }
        }

        function hideFieldError(fieldId) {
            const errorElement = document.getElementById(fieldId + 'Error');
            if (errorElement) {
                errorElement.style.display = 'none';
                errorElement.classList.remove('show');
            }
        }

        function clearFieldError(fieldId) {
            hideFieldError(fieldId);
            const field = document.getElementById(fieldId);
            if (field) field.classList.remove('error');
        }

        function showAlert(message, type = 'error') {
            // Esconder todos os alerts primeiro
            document.querySelectorAll('.alert').forEach(alert => {
                alert.style.display = 'none';
            });
            
            const alertElement = document.getElementById(type + 'Alert');
            if (alertElement) {
                const messageElement = alertElement.querySelector('.alert-message');
                if (messageElement) {
                    messageElement.textContent = message;
                }
                alertElement.style.display = 'block';
                
                // Scroll para o alerta
                alertElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        // ==================== SISTEMA DE FOR√áA DA SENHA ====================

        function updatePasswordRequirements(password) {
            const { requirements, strength } = checkPasswordStrength(password);
            const requirementElements = {
                length: document.getElementById('reqLength'),
                uppercase: document.getElementById('reqUppercase'),
                lowercase: document.getElementById('reqLowercase'),
                number: document.getElementById('reqNumber'),
                special: document.getElementById('reqSpecial')
            };
            
            // Atualizar cada requisito
            Object.keys(requirements).forEach(key => {
                const element = requirementElements[key];
                if (element) {
                    if (requirements[key]) {
                        element.classList.add('requirement-met');
                        element.classList.remove('requirement-unmet');
                    } else {
                        element.classList.remove('requirement-met');
                        element.classList.add('requirement-unmet');
                    }
                }
            });

            // Atualizar barra de for√ßa
            const strengthBar = document.getElementById('strengthBar');
            const strengthText = document.getElementById('strengthText');
            
            if (strengthBar && strengthText) {
                strengthBar.className = 'strength-bar';
                strengthText.textContent = '';
                strengthText.style.color = '';
                
                if (password.length > 0) {
                    let strengthClass = '';
                    let strengthMessage = '';
                    let color = '';
                    
                    switch(strength) {
                        case 0:
                        case 1:
                            strengthClass = 'strength-weak';
                            strengthMessage = 'Muito Fraca';
                            color = '#ef4444';
                            break;
                        case 2:
                            strengthClass = 'strength-weak';
                            strengthMessage = 'Fraca';
                            color = '#f97316';
                            break;
                        case 3:
                            strengthClass = 'strength-fair';
                            strengthMessage = 'Razo√°vel';
                            color = '#eab308';
                            break;
                        case 4:
                            strengthClass = 'strength-good';
                            strengthMessage = 'Boa';
                            color = '#84cc16';
                            break;
                        case 5:
                            strengthClass = 'strength-strong';
                            strengthMessage = 'Forte';
                            color = '#22c55e';
                            break;
                    }
                    
                    strengthBar.classList.add(strengthClass);
                    strengthText.textContent = strengthMessage;
                    strengthText.style.color = color;
                }
            }
        }

        // Event listener para a senha
        document.getElementById('password').addEventListener('input', function() {
            updatePasswordRequirements(this.value);
        });

        console.log('üéØ Sistema de cadastro pronto!');
    </script>
</body>
</html>