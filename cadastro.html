<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Amor Conect</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="globals.css">
    <link rel="stylesheet" href="components.css">
    
    <!-- CSS ESPEC√çFICO DO CADASTRO (S√ì O NECESS√ÅRIO) -->
    <style>
        .auth-logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 1rem auto;
            object-fit: contain;
            display: block;
            border-radius: 50%;
            padding: 10px;
            background: var(--bege);
        }
        
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 4px;
            border-radius: 4px;
            transition: var(--transition);
        }

        .password-toggle:hover {
            background: var(--cinza-claro);
        }

        .form-group {
            position: relative;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="logoamorconect.png" alt="Amor Conect">
                    <h1>Amor Conect</h1>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="btn btn-outline">Entrar</a>
                    <a href="cadastro.html" class="btn btn-primary">Cadastre-se</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="auth-container">
                <div class="auth-header">
                    <img src="logoamorconect.png" alt="Amor Conect" class="auth-logo">
                    <h1>Criar Conta</h1>
                    <p>Junte-se ao Amor Conect e encontre sua conex√£o perfeita</p>
                </div>

                <!-- Alert Messages -->
                <div id="errorAlert" class="alert alert-error">
                    <button class="close-alert" onclick="this.parentElement.style.display='none'">√ó</button>
                    <span class="alert-message"></span>
                </div>
                <div id="successAlert" class="alert alert-success">
                    <button class="close-alert" onclick="this.parentElement.style.display='none'">√ó</button>
                    <span class="alert-message"></span>
                </div>
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>Processando cadastro...</p>
                </div>

                <form id="registerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName" class="form-label">Nome *</label>
                            <input type="text" id="firstName" class="form-control" required placeholder="Seu nome">
                            <div id="firstNameError" class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="lastName" class="form-label">Sobrenome *</label>
                            <input type="text" id="lastName" class="form-control" required placeholder="Seu sobrenome">
                            <div id="lastNameError" class="error-message"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="nickname" class="form-label">Apelido/Nickname *</label>
                        <input type="text" id="nickname" class="form-control" required placeholder="Como quer ser chamado(a)">
                        <div id="nicknameError" class="error-message"></div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="form-label">E-mail *</label>
                        <input type="email" id="email" class="form-control" required placeholder="seu@email.com">
                        <div id="emailError" class="error-message"></div>
                    </div>

                    <div class="form-group">
                        <label for="birthDate" class="form-label">Data de Nascimento *</label>
                        <input type="date" id="birthDate" class="form-control" required>
                        <div id="birthDateError" class="error-message"></div>
                    </div>

                    <div class="form-group">
                        <label for="password" class="form-label">Senha *</label>
                        <input type="password" id="password" class="form-control" required placeholder="Crie uma senha segura">
                        <button type="button" class="password-toggle" id="togglePassword" aria-label="Mostrar senha">üëÅÔ∏è</button>
                        <div id="passwordError" class="error-message"></div>
                        
                        <!-- REQUISITOS DA SENHA -->
                        <div class="password-requirements">
                            <h4>Requisitos da senha:</h4>
                            <ul class="requirements-list">
                                <li id="reqLength" class="requirement-unmet">M√≠nimo 8 caracteres</li>
                                <li id="reqUppercase" class="requirement-unmet">Pelo menos 1 letra mai√∫scula</li>
                                <li id="reqLowercase" class="requirement-unmet">Pelo menos 1 letra min√∫scula</li>
                                <li id="reqNumber" class="requirement-unmet">Pelo menos 1 n√∫mero</li>
                                <li id="reqSpecial" class="requirement-unmet">Pelo menos 1 s√≠mbolo</li>
                            </ul>
                            <div class="password-strength">
                                <div id="strengthBar" class="strength-bar"></div>
                            </div>
                            <div id="strengthText" class="strength-text"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword" class="form-label">Confirmar Senha *</label>
                        <input type="password" id="confirmPassword" class="form-control" required placeholder="Digite a senha novamente">
                        <div id="confirmPasswordError" class="error-message"></div>
                    </div>

                    <div class="terms-group">
                        <input type="checkbox" id="terms" required>
                        <label for="terms">
                            Concordo com os <a href="#" target="_blank">Termos de Servi√ßo</a> e 
                            <a href="#" target="_blank">Pol√≠tica de Privacidade</a> *
                        </label>
                    </div>
                    <div id="termsError" class="error-message"></div>

                    <button type="submit" class="btn btn-primary btn-block" id="submitBtn">
                        Criar Conta
                    </button>

                    <div class="auth-footer">
                        <p>J√° tem uma conta? <a href="login.html">Fa√ßa login aqui</a></p>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Amor Conect</h3>
                    <p>Uma plataforma segura e discreta para conectar cora√ß√µes.</p>
                </div>
                <div class="footer-column">
                    <h3>Links R√°pidos</h3>
                    <ul>
                        <li><a href="index.html">P√°gina Inicial</a></li>
                        <li><a href="#como-funciona">Como Funciona</a></li>
                        <li><a href="#sobre">Sobre N√≥s</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Suporte</h3>
                    <ul>
                        <li><a href="#">Central de Ajuda</a></li>
                        <li><a href="#">Pol√≠tica de Privacidade</a></li>
                        <li><a href="#">Termos de Uso</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Amor Conect. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- SCRIPTS -->
    <script src="globals.js"></script>
    <script src="auth.js"></script>
    
    <!-- INICIALIZA√á√ÉO DO CADASTRO -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìù Cadastro.html - Inicializando...');
            
            // Configurar data m√°xima (18 anos atr√°s)
            const today = new Date();
            const maxDate = new Date(today.getFullYear() - 18, today.getMonth(), today.getDate());
            document.getElementById('birthDate').max = maxDate.toISOString().split('T')[0];
            
            // Configurar data m√≠nima (100 anos atr√°s)
            const minDate = new Date(today.getFullYear() - 100, today.getMonth(), today.getDate());
            document.getElementById('birthDate').min = minDate.toISOString().split('T')[0];

            // Salvar texto original do bot√£o
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.setAttribute('data-original-text', submitBtn.innerHTML);
            }

            // Configurar toggle de senha
            const toggleBtn = document.getElementById('togglePassword');
            const passwordInput = document.getElementById('password');
            
            if (toggleBtn && passwordInput) {
                toggleBtn.addEventListener('click', function() {
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                    toggleBtn.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üîí';
                    toggleBtn.setAttribute('aria-label', type === 'password' ? 'Mostrar senha' : 'Ocultar senha');
                });
            }

            // Configurar valida√ß√µes em tempo real da senha
            const passwordInputElement = document.getElementById('password');
            if (passwordInputElement) {
                passwordInputElement.addEventListener('input', function() {
                    updatePasswordRequirements(this.value);
                });
            }

            console.log('‚úÖ Cadastro.html inicializado!');
        });

        // Sistema de for√ßa da senha
        function updatePasswordRequirements(password) {
            const { requirements, strength } = checkPasswordStrength(password);
            const requirementElements = {
                length: document.getElementById('reqLength'),
                uppercase: document.getElementById('reqUppercase'),
                lowercase: document.getElementById('reqLowercase'),
                number: document.getElementById('reqNumber'),
                special: document.getElementById('reqSpecial')
            };
            
            // Atualizar cada requisito
            Object.keys(requirements).forEach(key => {
                const element = requirementElements[key];
                if (element) {
                    if (requirements[key]) {
                        element.classList.add('requirement-met');
                        element.classList.remove('requirement-unmet');
                    } else {
                        element.classList.remove('requirement-met');
                        element.classList.add('requirement-unmet');
                    }
                }
            });

            // Atualizar barra de for√ßa
            const strengthBar = document.getElementById('strengthBar');
            const strengthText = document.getElementById('strengthText');
            
            if (strengthBar && strengthText) {
                strengthBar.className = 'strength-bar';
                strengthText.textContent = '';
                strengthText.style.color = '';
                
                if (password.length > 0) {
                    let strengthClass = '';
                    let strengthMessage = '';
                    let color = '';
                    
                    switch(strength) {
                        case 0:
                        case 1:
                            strengthClass = 'strength-weak';
                            strengthMessage = 'Muito Fraca';
                            color = '#ef4444';
                            break;
                        case 2:
                            strengthClass = 'strength-weak';
                            strengthMessage = 'Fraca';
                            color = '#f97316';
                            break;
                        case 3:
                            strengthClass = 'strength-fair';
                            strengthMessage = 'Razo√°vel';
                            color = '#eab308';
                            break;
                        case 4:
                            strengthClass = 'strength-good';
                            strengthMessage = 'Boa';
                            color = '#84cc16';
                            break;
                        case 5:
                            strengthClass = 'strength-strong';
                            strengthMessage = 'Forte';
                            color = '#22c55e';
                            break;
                    }
                    
                    strengthBar.classList.add(strengthClass);
                    strengthText.textContent = strengthMessage;
                    strengthText.style.color = color;
                }
            }
        }

        console.log('üéØ Sistema de cadastro pronto!');
    </script>
</body>
</html>