<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - Amor Conect</title>
    <link rel="stylesheet" href="painel.css">
    <link rel="stylesheet" href="painel-mobile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="logopulselove.png" alt="Amor Conect">
                </div>
                <nav>
                    <ul>
                        <li><a href="home.html"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="mensagens.html"><i class="fas fa-envelope"></i> Mensagens</a></li>
                        <li><a href="busca.html"><i class="fas fa-search"></i> Buscar</a></li>
                    </ul>
                </nav>
                <div class="user-menu">
                    <div class="user-info">
                        <div class="user-avatar">
                            <div class="user-avatar-fallback">U</div>
                            <img class="avatar-image" style="display: none;" alt="Avatar do usu√°rio">
                            <div class="avatar-overlay">
                                <i class="fas fa-camera"></i>
                            </div>
                        </div>
                        <span id="userNickname">Usu√°rio</span>
                        <!-- BADGE PREMIUM -->
                        <div id="premiumBadge" class="premium-badge free">
                            <i class="fas fa-user"></i> Free
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <section class="page-header">
                <h1><i class="fas fa-user-edit"></i> Meu Perfil</h1>
                <p>Complete suas informa√ß√µes para melhorar suas conex√µes</p>
                
                <!-- STATUS DO PLANO -->
                <div id="planInfo" class="plan-info-container">
                    <!-- Ser√° preenchido automaticamente pelo JavaScript -->
                </div>
            </section>

            <!-- Se√ß√£o de Avatar -->
            <section class="form-section">
                <h3><i class="fas fa-camera"></i> Foto do Perfil</h3>
                <p class="section-description">Adicione uma foto para se destacar. Formatos: JPG, PNG, WebP (m√°x. 5MB)</p>
                
                <div class="avatar-upload-container">
                    <div class="avatar-preview-large">
                        <div class="user-avatar-large">
                            <div class="user-avatar-fallback-large">U</div>
                            <img class="avatar-image-large" style="display: none;" alt="Preview do avatar">
                            <div class="avatar-overlay-large">
                                <i class="fas fa-camera"></i>
                                <span>Clique para alterar</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="avatar-upload-actions">
                        <button type="button" class="btn btn-secondary" id="uploadAvatarBtn">
                            <i class="fas fa-upload"></i> Escolher Foto
                        </button>
                        <button type="button" class="btn btn-outline" id="removeAvatarBtn" style="display: none;">
                            <i class="fas fa-trash"></i> Remover Foto
                        </button>
                        
                        <!-- BOT√ÉO UPGRADE - MANTIDO -->
                        <a href="pricing.html" class="btn btn-premium" id="upgradePlanBtn">
                            <i class="fas fa-crown"></i> Fazer Upgrade
                        </a>
                    </div>
                    
                    <div class="upload-progress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <span class="progress-text">Enviando...</span>
                    </div>
                </div>
            </section>

            <!-- Profile Form -->
            <section class="profile-form">
                <form id="profileForm">
                    <!-- Dados Pessoais -->
                    <div class="form-section">
                        <h3><i class="fas fa-user-shield"></i> Dados Pessoais</h3>
                        <p class="section-description">Informa√ß√µes confidenciais - apenas voc√™ tem acesso</p>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="fullName">Nome Completo *</label>
                                <input type="text" id="fullName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="nickname">Apelido/Nickname *</label>
                                <input type="text" id="nickname" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="birthDate">Data de Nascimento *</label>
                                <input type="date" id="birthDate" class="form-control" readonly style="background-color: #f5f5f5; color: #666;">
                                <small>Data de nascimento - n√£o edit√°vel</small>
                            </div>
                            <div class="form-group">
                                <label for="email">E-mail</label>
                                <input type="email" id="email" class="form-control" readonly style="background-color: #f5f5f5; color: #666;">
                                <small>E-mail verificado - n√£o edit√°vel</small>
                            </div>
                            <div class="form-group">
                                <label for="cpf">CPF</label>
                                <input type="text" id="cpf" class="form-control" placeholder="000.000.000-00">
                            </div>
                            <div class="form-group">
                                <label for="phone">Telefone</label>
                                <input type="tel" id="phone" class="form-control" placeholder="(11) 99999-9999">
                            </div>
                        </div>
                    </div>

                    <!-- Endere√ßo -->
                    <div class="form-section">
                        <h3><i class="fas fa-map-marker-alt"></i> Endere√ßo</h3>
                        <p class="section-description">Informa√ß√µes de localiza√ß√£o para verifica√ß√£o</p>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="street">Rua</label>
                                <input type="text" id="street" class="form-control" placeholder="Nome da rua">
                            </div>
                            <div class="form-group">
                                <label for="number">N√∫mero</label>
                                <input type="text" id="number" class="form-control" placeholder="123">
                            </div>
                            <div class="form-group">
                                <label for="neighborhood">Bairro</label>
                                <input type="text" id="neighborhood" class="form-control" placeholder="Nome do bairro">
                            </div>
                            <div class="form-group">
                                <label for="city">Cidade</label>
                                <input type="text" id="city" class="form-control" placeholder="Nome da cidade">
                            </div>
                            <div class="form-group">
                                <label for="state">Estado</label>
                                <select id="state" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="AC">Acre</option>
                                    <option value="AL">Alagoas</option>
                                    <option value="AP">Amap√°</option>
                                    <option value="AM">Amazonas</option>
                                    <option value="BA">Bahia</option>
                                    <option value="CE">Cear√°</option>
                                    <option value="DF">Distrito Federal</option>
                                    <option value="ES">Esp√≠rito Santo</option>
                                    <option value="GO">Goi√°s</option>
                                    <option value="MA">Maranh√£o</option>
                                    <option value="MT">Mato Grosso</option>
                                    <option value="MS">Mato Grosso do Sul</option>
                                    <option value="MG">Minas Gerais</option>
                                    <option value="PA">Par√°</option>
                                    <option value="PB">Para√≠ba</option>
                                    <option value="PR">Paran√°</option>
                                    <option value="PE">Pernambuco</option>
                                    <option value="PI">Piau√≠</option>
                                    <option value="RJ">Rio de Janeiro</option>
                                    <option value="RN">Rio Grande do Norte</option>
                                    <option value="RS">Rio Grande do Sul</option>
                                    <option value="RO">Rond√¥nia</option>
                                    <option value="RR">Roraima</option>
                                    <option value="SC">Santa Catarina</option>
                                    <option value="SP">S√£o Paulo</option>
                                    <option value="SE">Sergipe</option>
                                    <option value="TO">Tocantins</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="zipCode">CEP</label>
                                <input type="text" id="zipCode" class="form-control" placeholder="00000-000">
                            </div>
                            <div class="form-group">
                                <label for="displayCity">Localiza√ß√£o P√∫blica *</label>
                                <input type="text" id="displayCity" class="form-control" placeholder="Ex: S√£o Paulo, SP" required>
                                <small>Cidade e estado vis√≠veis para outros usu√°rios</small>
                            </div>
                        </div>
                    </div>

                    <!-- Informa√ß√µes P√∫blicas -->
                    <div class="form-section">
                        <h3><i class="fas fa-heart"></i> Sobre Voc√™</h3>
                        <p class="section-description">Informa√ß√µes vis√≠veis para outros usu√°rios</p>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="gender">G√™nero *</label>
                                <select id="gender" class="form-control" required>
                                    <option value="">Selecione...</option>
                                    <option value="feminino">Feminino</option>
                                    <option value="masculino">Masculino</option>
                                    <option value="nao_informar">Prefiro n√£o informar</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="sexualOrientation">Orienta√ß√£o Sexual</label>
                                <select id="sexualOrientation" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="heterossexual">Heterossexual</option>
                                    <option value="homossexual">Homossexual</option>
                                    <option value="bissexual">Bissexual</option>
                                    <option value="outro">Outro</option>
                                    <option value="prefiro_nao_informar">Prefiro n√£o informar</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="profession">Profiss√£o</label>
                                <input type="text" id="profession" class="form-control" placeholder="Sua profiss√£o">
                            </div>
                            <div class="form-group">
                                <label for="education">Escolaridade</label>
                                <select id="education" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="fundamental_incompleto">Fundamental Incompleto</option>
                                    <option value="fundamental_completo">Fundamental Completo</option>
                                    <option value="medio_incompleto">M√©dio Incompleto</option>
                                    <option value="medio_completo">M√©dio Completo</option>
                                    <option value="superior_incompleto">Superior Incompleto</option>
                                    <option value="superior_completo">Superior Completo</option>
                                    <option value="pos_graduacao">P√≥s-gradua√ß√£o</option>
                                    <option value="mestrado">Mestrado</option>
                                    <option value="doutorado">Doutorado</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="zodiac">Signo</label>
                                <select id="zodiac" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="aries">‚ôà √Åries</option>
                                    <option value="touro">‚ôâ Touro</option>
                                    <option value="gemeos">‚ôä G√™meos</option>
                                    <option value="cancer">‚ôã C√¢ncer</option>
                                    <option value="leao">‚ôå Le√£o</option>
                                    <option value="virgem">‚ôç Virgem</option>
                                    <option value="libra">‚ôé Libra</option>
                                    <option value="escorpiao">‚ôè Escorpi√£o</option>
                                    <option value="sagitario">‚ôê Sagit√°rio</option>
                                    <option value="capricornio">‚ôë Capric√≥rnio</option>
                                    <option value="aquario">‚ôí Aqu√°rio</option>
                                    <option value="peixes">‚ôì Peixes</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Caracter√≠sticas Pessoais -->
                    <div class="form-section">
                        <h3><i class="fas fa-user-tag"></i> Caracter√≠sticas Pessoais</h3>
                        <p class="section-description">Selecione as caracter√≠sticas que melhor te definem</p>
                        
                        <div class="characteristics-grid">
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Rom√¢ntico(a)">
                                <i class="fas fa-heart"></i> Rom√¢ntico(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Divertido(a)">
                                <i class="fas fa-laugh"></i> Divertido(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Carinhoso(a)">
                                <i class="fas fa-hands-heart"></i> Carinhoso(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="S√©rio(a)">
                                <i class="fas fa-user-tie"></i> S√©rio(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Faltante">
                                <i class="fas fa-user-clock"></i> Falante
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Dominante">
                                <i class="fas fa-crown"></i> Dominante
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Intelectual">
                                <i class="fas fa-brain"></i> Intelectual
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Sensual">
                                <i class="fas fa-fire"></i> Sensual
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Sentimental">
                                <i class="fas fa-tear"></i> Sentimental
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Flex√≠vel">
                                <i class="fas fa-exchange-alt"></i> Flex√≠vel
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Organizado(a)">
                                <i class="fas fa-tasks"></i> Organizado(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Descontra√≠do(a)">
                                <i class="fas fa-smile"></i> Descontra√≠do(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Determinado(a)">
                                <i class="fas fa-bullseye"></i> Determinado(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Aventureiro(a)">
                                <i class="fas fa-mountain"></i> Aventureiro(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Conservador(a)">
                                <i class="fas fa-shield-alt"></i> Conservador(a)
                            </label>
                            <label class="characteristic-checkbox">
                                <input type="checkbox" name="characteristics" value="Reservado(a)">
                                <i class="fas fa-user-secret"></i> Reservado(a)
                            </label>
                        </div>
                    </div>

                    <!-- Estilo de Vida -->
                    <div class="form-section">
                        <h3><i class="fas fa-running"></i> Estilo de Vida</h3>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="religion">Religi√£o</label>
                                <select id="religion" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="catolica">Cat√≥lica</option>
                                    <option value="evangelica">Evang√©lica</option>
                                    <option value="espirita">Esp√≠rita</option>
                                    <option value="umbanda_candomble">Umbanda/Candombl√©</option>
                                    <option value="budista">Budista</option>
                                    <option value="judaica">Judaica</option>
                                    <option value="islamica">Isl√¢mica</option>
                                    <option value="outra">Outra</option>
                                    <option value="nenhuma">Nenhuma</option>
                                    <option value="prefiro_nao_informar">Prefiro n√£o informar</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="drinking">Bebida</label>
                                <select id="drinking" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="nao_bebo">N√£o bebo</option>
                                    <option value="socialmente">Socialmente</option>
                                    <option value="frequentemente">Com frequ√™ncia</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="smoking">Fumo</label>
                                <select id="smoking" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="nao_fumo">N√£o fumo</option>
                                    <option value="socialmente">Socialmente</option>
                                    <option value="frequentemente">Com frequ√™ncia</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="exercise">Exerc√≠cio F√≠sico</label>
                                <select id="exercise" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="nao_pratico">N√£o pratico</option>
                                    <option value="ocasionalmente">Ocasionalmente</option>
                                    <option value="regularmente">Regularmente</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="exerciseDetails">Detalhes do Exerc√≠cio</label>
                                <input type="text" id="exerciseDetails" class="form-control" placeholder="Ex: muscula√ß√£o, corrida, yoga...">
                            </div>
                            <div class="form-group">
                                <label for="hasPets">Tem animais de estima√ß√£o?</label>
                                <select id="hasPets" class="form-control">
                                    <option value="">Selecione...</option>
                                    <option value="sim">Sim</option>
                                    <option value="nao">N√£o</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="petsDetails">Detalhes dos Pets</label>
                                <input type="text" id="petsDetails" class="form-control" placeholder="Ex: 2 gatos, 1 cachorro...">
                            </div>
                        </div>
                    </div>

                    <!-- Prefer√™ncias -->
                    <div class="form-section">
                        <h3><i class="fas fa-search"></i> Prefer√™ncias</h3>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="lookingFor">Procura por *</label>
                                <select id="lookingFor" class="form-control" required>
                                    <option value="">Selecione...</option>
                                    <option value="amizade">Amizade</option>
                                    <option value="namoro">Namoro</option>
                                    <option value="relacionamento_serio">Relacionamento S√©rio</option>
                                    <option value="conversa">Apenas Conversa</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Interesses -->
                    <div class="form-section">
                        <h3><i class="fas fa-star"></i> Interesses</h3>
                        
                        <div class="interests-grid">
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Cinema">
                                <i class="fas fa-film"></i> Cinema
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="M√∫sica">
                                <i class="fas fa-music"></i> M√∫sica
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Esportes">
                                <i class="fas fa-futbol"></i> Esportes
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Viagens">
                                <i class="fas fa-plane"></i> Viagens
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Leitura">
                                <i class="fas fa-book"></i> Leitura
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Culin√°ria">
                                <i class="fas fa-utensils"></i> Culin√°ria
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Jogos">
                                <i class="fas fa-gamepad"></i> Jogos
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Arte">
                                <i class="fas fa-palette"></i> Arte
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Tecnologia">
                                <i class="fas fa-laptop"></i> Tecnologia
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Natureza">
                                <i class="fas fa-tree"></i> Natureza
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Fotografia">
                                <i class="fas fa-camera"></i> Fotografia
                            </label>
                            <label class="interest-checkbox">
                                <input type="checkbox" name="interests" value="Dan√ßa">
                                <i class="fas fa-music"></i> Dan√ßa
                            </label>
                        </div>
                    </div>

                    <!-- Descri√ß√£o Pessoal -->
                    <div class="form-section">
                        <h3><i class="fas fa-edit"></i> Descri√ß√£o Pessoal</h3>
                        
                        <div class="form-group">
                            <label for="description">Conte um pouco sobre voc√™</label>
                            <textarea id="description" class="form-control" placeholder="Fale sobre seus hobbies, personalidade, objetivos... (m√°x. 100 caracteres)" maxlength="100"></textarea>
                            <div class="char-count">
                                <span id="charCount">0</span>/100 caracteres
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="saveButton">
                            <i class="fas fa-save"></i> Salvar Perfil
                        </button>
                        <a href="home.html" class="btn btn-secondary">
                            <i class="fas fa-home"></i> Voltar para Home
                        </a>
                    </div>
                </form>
            </section>
<!-- SE√á√ÉO: Galeria Premium -->
<div class="form-section section-public" id="gallerySection">
    <h3><i class="fas fa-images"></i> Minha Galeria Premium
        <span class="section-badge badge-premium">Premium</span>
    </h3>
    
    <!-- Gest√£o da Galeria (aparece apenas para Premium) -->
    <div id="galleryManager" style="display: none;">
        <!-- Status do Espa√ßo -->
        <div class="storage-status">
            <div class="storage-info">
                <span>Espa√ßo usado: <strong id="storageUsed">0MB</strong> de <strong>10MB</strong></span>
                <div class="storage-bar">
                    <div class="storage-fill" id="storageFill"></div>
                </div>
            </div>
        </div>

        <!-- Upload -->
        <div class="gallery-upload">
            <input type="file" id="galleryUpload" multiple accept="image/*" style="display: none;">
            <button type="button" class="btn btn-primary" id="uploadGalleryBtn">
                <i class="fas fa-plus"></i> Adicionar Fotos
            </button>
            <small style="display: block; margin-top: 0.5rem; color: var(--text-light);">
                Formatos: JPG, PNG ‚Ä¢ M√°ximo 10MB por imagem
            </small>
        </div>

        <!-- Grid de Imagens -->
        <div class="gallery-grid" id="galleryGrid">
            <div class="empty-gallery">
                <i class="fas fa-images" style="font-size: 3rem; color: var(--lilas); margin-bottom: 1rem;"></i>
                <p>Sua galeria est√° vazia</p>
                <p style="font-size: 0.9rem; color: var(--text-light);">Adicione fotos para compartilhar momentos especiais</p>
            </div>
        </div>
    </div>

    <!-- Mensagem para usu√°rios free -->
    <div class="free-message" id="galleryUpgradeCTA">
        <div class="message-icon">üñºÔ∏è</div>
        <div class="message-content">
            <p><strong>Galeria Premium Bloqueada</strong></p>
            <p>Desbloqueie sua galeria exclusiva para compartilhar fotos especiais!</p>
            <a href="pricing.html" class="btn btn-premium">
                <i class="fas fa-crown"></i> Tornar-se Premium
            </a>
        </div>
    </div>
</div>
</section>
</div>
</main>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="footer-content">
            <div class="footer-column">
                <h3>Amor Conect</h3>
                <p>Conectando cora√ß√µes de forma segura e genu√≠na.</p>
            </div>
            <div class="footer-column">
                <h3>Links R√°pidos</h3>
                <ul>
                    <li><a href="home.html">Home</a></li>
                    <li><a href="mensagens.html">Mensagens</a></li>
                    <li><a href="busca.html">Buscar</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Suporte</h3>
                <ul>
                    <li><a href="#">Ajuda</a></li>
                    <li><a href="#">Privacidade</a></li>
                    <li><a href="#">Termos</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2024 Amor Conect. Todos os direitos reservados.</p>
        </div>
    </div>
</footer>

<!-- Inputs hidden para upload -->
<input type="file" id="avatarUpload" accept="image/jpeg,image/jpg,image/png,image/webp" style="display: none;">

<!-- Scripts na ordem correta -->
<script src="painel-perfil.js"></script>
<script src="premium-check.js"></script>
<script src="avatar.js"></script>
<script src="galeria.js"></script>
</body>
</html>